// ──────────────────────────────────────────────
// supplements.ts — Нутрицевтический протокол
// восстановления после ORIF локтевого сустава
// ──────────────────────────────────────────────

export interface Supplement {
  id: string
  name: string
  dose: string
  timing: string
  slot: 'fasting' | 'breakfast' | 'lunch' | 'dinner' | 'bedtime'
  priority: 1 | 2 | 3
  reason: string
  form?: string
  note?: string
}

export const supplements: Supplement[] = [
  // ───── Натощак (06:30) ─────
  {
    id: 'sup_collagen',
    name: 'Коллаген',
    dose: '10–15 г',
    timing: '06:30 натощак',
    slot: 'fasting',
    priority: 1,
    reason:
      'Основной строительный белок соединительной ткани. Приём натощак повышает биодоступность для связок и хряща.',
    form: 'Гидролизат коллагена I и III типа (порошок)',
    note: 'Принимать за 30–60 минут до еды. Обязательно вместе с витамином C для синтеза.',
  },
  {
    id: 'sup_vitc_fasting',
    name: 'Витамин C',
    dose: '500 мг',
    timing: '06:30 натощак',
    slot: 'fasting',
    priority: 1,
    reason:
      'Кофактор синтеза коллагена. Без витамина C коллаген не встраивается в ткани.',
    form: 'Аскорбат кальция или Ester-C',
    note: 'Принимать одновременно с коллагеном.',
  },

  // ───── Завтрак (07:30) ─────
  {
    id: 'sup_d3',
    name: 'Витамин D3',
    dose: '4000–5000 МЕ',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 1,
    reason:
      'Регулирует усвоение кальция и фосфора. Критичен для минерализации костной мозоли после перелома.',
    form: 'Холекальциферол в масляной форме (капли или капсулы)',
    note: 'Принимать с жирной пищей для лучшего усвоения. Контроль уровня 25(OH)D каждые 3 месяца.',
  },
  {
    id: 'sup_k2',
    name: 'Витамин K2 (MK-7)',
    dose: '100–200 мкг',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 1,
    reason:
      'Направляет кальций в кости, предотвращая отложение в сосудах. Синергия с D3.',
    form: 'Менахинон-7 (MK-7)',
    note: 'Обязательный компаньон D3. При приёме антикоагулянтов — согласовать с врачом.',
  },
  {
    id: 'sup_omega3_am',
    name: 'Омега-3',
    dose: '1–1.5 г (EPA+DHA)',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 1,
    reason:
      'Противовоспалительное действие. Уменьшает послеоперационный отёк и боль.',
    form: 'Рыбий жир в триглицеридной форме (капсулы)',
    note: 'Важно содержание EPA >= 600 мг и DHA >= 400 мг на порцию.',
  },
  {
    id: 'sup_calcium_am',
    name: 'Кальций',
    dose: '500 мг',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 1,
    reason:
      'Основной минерал костной ткани. Разделённый приём (2 x 500 мг) повышает усвоение.',
    form: 'Цитрат кальция (лучше усваивается, чем карбонат)',
    note: 'Не принимать одновременно с железом или цинком — конкурируют за транспорт.',
  },
  {
    id: 'sup_osteogenon_am',
    name: 'Остеогенон',
    dose: '1 таблетка (830 мг)',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 2,
    reason:
      'Оссеин-гидроксиапатитный комплекс. Содержит органическую и минеральную фракции кости, стимулирует остеобласты.',
    form: 'Таблетки',
    note: 'Назначение врача. Курс обычно 3–6 месяцев.',
  },
  {
    id: 'sup_b6',
    name: 'Витамин B6',
    dose: '25 мг',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 2,
    reason:
      'Участвует в синтезе коллагена и метаболизме аминокислот. Поддерживает нервную проводимость (важно при послеоперационном онемении).',
    form: 'Пиридоксин гидрохлорид или P-5-P (активная форма)',
  },
  {
    id: 'sup_boron',
    name: 'Бор',
    dose: '3 мг',
    timing: '07:30 с завтраком',
    slot: 'breakfast',
    priority: 3,
    reason:
      'Микроэлемент, улучшающий метаболизм кальция, магния и витамина D. Поддерживает плотность костной ткани.',
    form: 'Борат натрия или борглюконат кальция',
  },

  // ───── Обед (13:00) ─────
  {
    id: 'sup_calcium_pm',
    name: 'Кальций',
    dose: '500 мг',
    timing: '13:00 с обедом',
    slot: 'lunch',
    priority: 1,
    reason:
      'Вторая порция кальция. Разделение на 2 приёма обеспечивает равномерное усвоение в течение дня.',
    form: 'Цитрат кальция',
  },
  {
    id: 'sup_vitc_lunch',
    name: 'Витамин C',
    dose: '500 мг',
    timing: '13:00 с обедом',
    slot: 'lunch',
    priority: 2,
    reason:
      'Вторая порция для поддержания постоянного уровня (витамин C водорастворим, быстро выводится).',
    form: 'Аскорбат кальция или Ester-C',
  },
  {
    id: 'sup_omega3_pm',
    name: 'Омега-3',
    dose: '1–1.5 г (EPA+DHA)',
    timing: '13:00 с обедом',
    slot: 'lunch',
    priority: 2,
    reason:
      'Вторая порция для поддержания противовоспалительного фона в течение дня.',
    form: 'Рыбий жир в триглицеридной форме (капсулы)',
  },

  // ───── Ужин (19:00) ─────
  {
    id: 'sup_zinc',
    name: 'Цинк',
    dose: '25–30 мг',
    timing: '19:00 с ужином',
    slot: 'dinner',
    priority: 2,
    reason:
      'Критичен для заживления ран и синтеза коллагена. Участвует в работе 300+ ферментов.',
    form: 'Цинк бисглицинат (хелатная форма, минимум побочек для ЖКТ)',
    note: 'Принимать отдельно от кальция (разнесены по времени — утро и вечер).',
  },
  {
    id: 'sup_osteogenon_pm',
    name: 'Остеогенон',
    dose: '1 таблетка (830 мг)',
    timing: '19:00 с ужином',
    slot: 'dinner',
    priority: 2,
    reason:
      'Вторая порция оссеин-гидроксиапатитного комплекса для поддержания остеогенеза.',
    form: 'Таблетки',
  },
  {
    id: 'sup_silicon',
    name: 'Кремний',
    dose: '5–10 мг',
    timing: '19:00 с ужином',
    slot: 'dinner',
    priority: 3,
    reason:
      'Участвует в формировании коллагенового матрикса кости. Улучшает прочность соединительной ткани.',
    form: 'Ортокремниевая кислота (жидкая форма) или холин-стабилизированная',
  },

  // ───── Перед сном (22:00) ─────
  {
    id: 'sup_magnesium',
    name: 'Магний',
    dose: '300–400 мг',
    timing: '22:00 перед сном',
    slot: 'bedtime',
    priority: 1,
    reason:
      'Расслабляет мышцы (антиспазматический эффект), улучшает сон, участвует в минерализации кости. Приём на ночь оптимален.',
    form: 'Магний бисглицинат или магний L-треонат',
    note: 'Бисглицинат — для мышц и сна. L-треонат — дополнительно для нервной системы. Не совмещать с кальцием.',
  },
]

export type SupplementSlot = Supplement['slot']

export const slotSchedule: Record<SupplementSlot, string> = {
  fasting: '06:30',
  breakfast: '07:30',
  lunch: '13:00',
  dinner: '19:00',
  bedtime: '22:00',
}

export const slotLabels: Record<SupplementSlot, string> = {
  fasting: 'Натощак',
  breakfast: 'Завтрак',
  lunch: 'Обед',
  dinner: 'Ужин',
  bedtime: 'Перед сном',
}

export function getSupplementsBySlot(slot: SupplementSlot): Supplement[] {
  return supplements.filter((s) => s.slot === slot)
}

export function getSupplementsByPriority(priority: 1 | 2 | 3): Supplement[] {
  return supplements.filter((s) => s.priority === priority)
}
